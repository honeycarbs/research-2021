\chapter[Определение тональности на основе правил и шаблонов]{Определение тональности \\ на основе правил \\и шаблонов}
В разделе описано применение инженерно --- лингвистического подхода, приведены примеры словарей оценочной лексики и примеры математических моделей, реализующих данный подход.
\section{Словари оценочной лексики}
При применении метода, основывающееся на правилах и шаблонах, сначала необходимо составить словарь оценочных слов и выражений. В таких словарях обычно каждому слову приписывается оценка тональности. Словари могут быть сформированы следующим образом:
\begin{itemize}
	\item сопоставление существующего словаря с корпусом анализируемых текстов, выборка предметной лексики;
	\item автоматизированный анализ корпуса текста и отбор оценочной лексики по заранее известному алгоритму;
	\item перевод иноязычных существующих словарей оценочной лексики на необходимый язык;
	\item просмотр корпуса текстов и пополнение словаря вручную.
\end{itemize}

В работе \cite{productrus} предложен подход автоматического порождения тонального словаря ProductSentiRus. Извлечение оценочных слов в заданной предметной области основано на
нескольких текстовых корпусах: корпус отзывов о продуктах с оценками пользователей, коллекции описаний продуктов и контрастного корпуса (например, новостного). Такие корпусы могут быть автоматически сформированы для разных предметных областей. 

Кроме того, в работе предполагается, что некоторые части корпуса мнений можно выделить: например, корпусы, в которых выше концентрация оценочных слов, большее разнообразие знаков пунктуации (троеточия и восклицательные знаки), большая концентрация коротких предложений (менее семи слов), предложения, содержащие аспект, к которому применена оценочная лексика, без других существительных.

Словарь представлен как список 5 тысяч слов, упорядоченных по мере снижения вычисленной вероятности их оценочности без указания позитивной или негативной тональности. Точность оценочных слов в первой тысяче слова списка составляет более 91\%. 


Ниже представлена таблица наиболее вероятных оценочных слов по версии словаря ProductSentiRus.
\begin{table}[H]
	\caption{Примеры слов из словаря ProductSentiRus}
	\centering
	\renewcommand{\arraystretch}{1.6}
	\begin{tabular}{ll}
		бесподобный & 0.963 \\
		невнятный & 0.953 \\
		отличнейший & 0.935 \\
		обалденный & 0.933 \\
		безумно & 0.924 \\
		непонятно & 0.921 \\
		неприятно & 0.920 \\
		отвратный & 0.920 \\
		нежный & 0.916
	\end{tabular}
	\label{psrus}
\end{table}

Также можно привести в пример словарь РуСентиЛекс. Он представляет собой упорядоченный по алфавиту список слов и выражений, содержащий следующие типы русскоязычных слов, значения которых связаны с тональностью: 
\begin{itemize}
	\item слова литературного русского языка, явно выражающие отношение к аспекту (например, \textit{хороший});
	\item слова литературного русского языка, подразумевающие в контексте наличие имплицитной оценки, то есть не передающие сами по себе отношение автора, но имеющие положительную или отрицательную оценку, например, \textit{болезнь, спам, драка};
	\item сленговые слова русскоязычных пользователей Твиттера.
\end{itemize}
Словарь РуСентиЛекс хранится в простом текстовом формате, подобном формату словаря MPQA \cite{mpqa}. Каждой единице словаря приписываются следующие атрибуты:
\begin{itemize}
	\item часть речи;
	\item слово или фраза, в которой каждое слово стоит в лемматизированной форме(для существительных --- именительный падеж, единственное число, для прилагательных --- именительный падеж, единственное число, мужской род, для глаголов, причастий, деепричастий --- глагол в инфинитиве (неопределённой форме) несовершенного вида);
	\item тональность (негативная, позитивная, нейтральная, двойная). Последнее означает, что оценка зависит от контекста;
	\item источник тональности (эксплицитная или имплицитная оценка).
\end{itemize}
Словаря Linis-Crowd \cite{linsucrowd} создавался для анализа тональности текстов социальных сетей. Солварь включает:
\begin{itemize}
	\item наиболее частотные прилагательные русского языка, употребляемые в текстах социальных сетей;
	\item образованные от отобранных прилагательных наречия,;
	\item словарь ProductSentiRus, из которого были выбраны слова, подходящие для анализа сообщений в социальных сетях и др.
\end{itemize}
Оценка выражается целым числом по шкале от $-$2 (сильно негативный) до +2 (сильно позитивный). Оценки различных разметчиков усреднялись.
\section{Построение математической модели}
Для правильности построения оценки предложения используется ряд правил, которые модифицируют оценку в зависимости от контекста. Так, например, в работе \cite{neg} приведен перечень служебных слов корректирующего лексикона. В таблице \ref{wrdneg} представлены некоторые из них. 
\begin{table}[H]
	\caption{Примеры служебных символов корректирующего лексикона}
	\centering
	\renewcommand{\arraystretch}{1.5}
	\begin{tabular}{ccc}
		\hline Корректирующий & Примеры & Служебный \\
		лексикон & ~ & символ \\ \hline
		Модификаторы полярности & не, нет & ALT \\ \hline
		& вопросительный знак, & \\
		& вопросительный знак с & QM \\ 
		& восклицательным знаком & \\ \hline
		Усилители полярности & очень, совершенно, & INC \\ 
		& никогда, нигде & \\ \hline
		Антимодификаторы & так, такой & TH \\
		полярности & & \\
	\end{tabular}
	\label{wrdneg}
\end{table}
Некоторые правила модификации полярности с использованием вышеперечисленных обозначений приведены ниже. 
\begin{enumerate}
	\item \textbf{ALT NEG $\rightarrow$ POS}\\ 
	Если в промежутке от начала предложения или знака препинания или союза <<и, или>> до следующего знака препинания или союза «и, или» имеется модификатор полярности, то отрицательная полярность всех слов, входящих в оценочный лексикон, в данном промежутке изменяется на положительную. Порядок указанных элементов (модификатор, слово с полярностью, любое другое слово) значения не имеет. \\
	\textit{Пример:} Никто не заставил меня ждать. \textit{Результат:} тональность отрицательная.
	\item  \textbf{INC NEG $\rightarrow$ NEG NEG}\\ 
	Если в промежутке от начала предложения или знака препинания до следующего знака препинания имеются слова, входящие в отрицательный лексикон, а также имеется усилитель, то каждый усилитель засчитывается за одно слово отрицательного лексикона. Порядок указанных элементов (усилитель, слово с полярностью, любое другое слово) значения не имеет.\\
	\textit{Пример:} Я бы никогда не купил этот фен. \textit{Результат:} тональность отрицательная.
	\item \textbf{TH ALT NEG $\rightarrow$ NEG}\\ 
	Если в промежутке от начала предложения или знака препинания до следующего знака препинания имеется модификатор полярности (ALT) и антимодификатор полярности, то полярность слов в данном промежутке не изменяется.
	\textit{Пример:} Таких проблем с регулятором мощности я не ожидал. \textit{Результат:} тональность отрицательная.
	\item \textbf{QM $\rightarrow$ NEG}\\ 
	Если предложение заканчивается вопросительным знаком или вопросительным знаком с восклицательным знаком, при этом в предложении нет слов, входящих в оценочный лексикон, то полярность данного предложения оценивается как негативная. \\
	\textit{Пример:} Почему все цвета в этом наборе синие? \textit{Результат:} тональность отрицательная.
	\item \textbf{POS<1>QM $\rightarrow$ NEG}\\
	Если предложение состоит из одного слова с положительной полярностью и заканчивается <<?>> или <<?!>>, то полярность данного слова изменяется на отрицательную.\\
	\textit{Пример:} Мощный?! \textit{Результат:} тональность отрицательная.
	
\end{enumerate}

В работе \cite{negation} проставление оценок происходит следующим образом. Пусть $ast_1 \dots sw_i$ --- оценочные термины, для которых уже проведена процедура оценки, $a_i$ --- оценка из словаря оценочной лексики. Тогда оценка для каждого аспектного термина вычисляется следующим образом: 
\begin{equation}
	score(a_i, S) = \sum_{sw_j \in S}\cfrac{num\left(sw_j\right)}{dist\left( sw_j, a_i\right)},
\end{equation}
где $num\left(sw_j\right)$ --- числовая оценка тональности, $dist\left( sw_j, a_i\right)$ --- расстояние между оценочным словом и аспектом. На оценку каждого оценочного термина влияют все слова в предложении, однако мера в которой они влияют на итоговую оценку определяется расстоянием от слова до оценочного термина. 

Работа \cite{modf} учитывает фактор нереального контекста --- в этой работе описываются правила, в результате применения которых тональность слов, являющихся индикаторами нереального контекста, не принимаются во внимание. В работе определены следующие маркеры нереального контекста: 
\begin{itemize}
	\item индикаторы условного наклонения (например, \textit{если бы});
	\item модальные глаголы;
	\item вопросы и слова, заключенные в кавычки.
\end{itemize}

Работа \cite{8pattrns} предлагает более детальный подход --- используется шесть правил для составления оценки:
\begin{itemize}
	\item перевод в противоположную тональность и применение отрицаний;
	\item приписывание доминирующей тональности идентификатора для синтаксических групп --- например, \textbf{POS}(\textit{завораживающий}) + \textbf{NEG}(\textit{хаос}) \\ = \textbf{POS}(\textit{завораживающий хаос});
	\item распространение модификатора на слово, стоящее рядом, если используется глагол распространения, такой как \textit{ненавидеть, обожать} или \textit{восхищаться};
	\item доминирование полярности глагола над объектом, к которому применяется глагол;
	\item нейтрализация оценочного выражения предлогом --- модификатором, таким как, например, \textit{не смотря на};
	\item усиление или ослабление веса тональности при обнаружении таких слов как \textit{очень}.
\end{itemize}

Таким образом, инженерно --- лингвистический подход имеет следующие достоинства:
\begin{itemize}
	\item результат работы зависит от содержимого словаря оценочной лексики и используемых правил --- то есть, результат предсказуем;
	\item возможен более глубокий анализ тональности на уровне высказывания, если подобрать словарь, оценка слов в котором будет шире.
\end{itemize}
Однако, можно выделить и следующие недостатки:
\begin{itemize}
	\item составление словаря оценочной лексики и правил оценки вручную --- трудоемкая и дорогостоящая операция;
	\item при узком диапазоне слов в словаре оценочной лексики метод дает неточные результаты. 
\end{itemize}
\section{Вывод}
Инженерно лингвистический подход показывает высокую точность работы. Однако, результат напрямую зависит от организации и содержания словаря. Данный метод удобно применять в тех ситуациях, когда известна предметная область исследования и сущности, с которыми будет проведена работа.